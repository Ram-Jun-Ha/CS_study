# π“λ©”λ¨λ¦¬ λ‹¨νΈν™”(Memory Fragmentation)
> RAMμ—μ„  λ©”λ¨λ¦¬μ κ³µκ°„μ΄ μ‘μ€ μ΅°κ°μΌλ΅ λ‚λ‰μ–΄μ Έ μ¶©λ¶„ν μ‚¬μ© κ°€λ¥ν• λ©”λ¨λ¦¬κ°€ μμμ—λ„ μ‹μ¤ν…μ΄ λ©”λ¨λ¦¬ ν• λ‹Ήμ„ ν•  μ μ—†λ” μƒνƒ

λ©”λ¨λ¦¬ λ‹¨νΈν™”κ°€ λ°μƒν•λ” μ›μΈμ— λ”°λΌ `λ‚΄λ¶€ λ‹¨νΈν™”`μ™€ `μ™Έλ¶€ λ‹¨νΈν™”`λ΅ κµ¬λ¶„ ν•  μ μλ‹¤.

## π“λ‚΄λ¶€ λ‹¨νΈν™”(Internal Fragmentation)
![alt text](img/os_fragmentation_01.png)

- λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•  λ• `ν”„λ΅μ„Έμ¤κ°€ ν•„μ”ν• μ–‘λ³΄λ‹¤ λ” ν° λ©”λ¨λ¦¬κ°€ ν• λ‹Ή`λμ–΄ `λ©”λ¨λ¦¬ κ³µκ°„μ΄ λ‚­λΉ„`λλ” μƒν™©
- μ„ κ·Έλ¦Όκ³Ό κ°™μ΄ 50KBλ¥Ό ν• λ‹Ή λ°›μ€ ν”„λ΅μ„Έμ¤κ°€ 40KB λ°–μ— μ‚¬μ©ν•μ§€ μ•λ”λ‹¤λ©΄ 10KBλ§νΌμ λ‚΄λ¶€ λ‹¨νΈν™”κ°€ λ°μƒ

## π“μ™Έλ¶€ λ‹¨νΈν™”(External Fragmentation)
![alt text](img/os_fragmentation_02.png)

- λ©”λ¨λ¦¬κ°€ ν• λ‹Ήλκ³  ν•΄μ λλ” μ‘μ—…μ΄ λ°λ³µλ  λ•, μ‘μ€ λ©”λ¨λ¦¬κ°€ μ¤‘κ°„μ¤‘κ°„ μƒκ²¨λ‚λ‹¤. μ΄λ¬ν• λ©”λ¨λ¦¬ κ³µκ°„λ“¤μ΄ λ§μ•„μ§€λ©΄μ„ `μ΄ μ‚¬μ© κ°€λ¥ν• λ©”λ¨λ¦¬ κ³µκ°„μ€ μ¶©λ¶„ν•μ§€λ§ μ‹¤μ λ΅ ν• λ‹Ήν•  μ μ—†λ” μƒν™©`
- λ‚¨μ€ κ³µκ°„μ€ 12Kμ΄λ‚ ν”„λ΅μ„Έμ¤ Eλ¥Ό λ¶„ν• ν•μ—¬ λ„£μ„ μ μ—†μΌλ―€λ΅ ν• λ‹Ήν•  μ μ—†λ‹¤.

## π“λ©”λ¨λ¦¬ λ‹¨νΈν™”λ¥Ό ν•΄κ²°ν•κΈ° μ„ν• λ©”λ¨λ¦¬ κ΄€λ¦¬ λ°©λ²•
### νμ΄μ§• κΈ°λ²• (Paging)
- κ°€μƒ λ©”λ¨λ¦¬ μ‚¬μ©, μ™Έλ¶€ λ‹¨νΈν™” ν•΄κ²°, λ‚΄λ¶€ λ‹¨νΈν™” μ΅΄μ¬
![alt text](img/os_fragmentation_03.png)

- κ³ μ • λ¶„ν•  λ°©μ‹μ„ μ΄μ©ν• κ°€μƒ λ©”λ¨λ¦¬ κ΄€λ¦¬ κΈ°λ²•, λ¬Όλ¦¬ μ£Όμ† κ³µκ°„μ„ κ°™μ€ ν‚¤κΈ°μ λ©”λ¨λ¦¬ μμ—­μΌλ΅ λ‚λ„μ–΄ μ‚¬μ©ν•λ‹¤.
- κ°€μƒ μ£Όμ†λ” ν”„λ΅μ„Έμ¤ μ…μ¥μ—μ„ λ°”λΌλ³Έ λ©”λ¨λ¦¬ κ³µκ°„μΌλ΅ ν•­μƒ 0λ²μ§€λ¶€ν„° μ‹μ‘
- λ¬Όλ¦¬ λ©”λ¨λ¦¬ λ‹¨μ„λ΅ κ°€μƒ λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•κΈ° λ•λ¬Έμ— νμ΄μ§€ ν¬κΈ°μ™€ ν”„λ μ„ ν¬κΈ°λ” κ°™λ‹¤.
  - νμ΄μ§€ : κ°€μƒ μ£Όμ†μ λ¶„ν• λ κ° μμ—­
  - ν”„λ μ„ : λ¬Όλ¦¬ λ©”λ¨λ¦¬μ κ° μμ—­
  - page mapping : νμ΄μ§€μ™€ ν”„λ μ„μ„ λ€μ‘ μ‹ν‚¤λ” κ³Όμ •, μ΄λ¥Ό μ„ν•΄ paging tableμ΄ μλ‹¤
- μ—°μ†μ μ΄μ§€ μ•μ€ κ³µκ°„λ„ ν™μ©ν•  μ μκΈ° λ•λ¬Έμ— μ™Έλ¶€ λ‹¨νΈν™” λ¬Έμ λ¥Ό ν•΄κ²°ν•  μ μλ‹¤
- νμ΄μ§€ λ‹¨μ„μ— μ•λ§κ² κ½‰μ±„μ› μ“°λ”κ² μ•„λ‹λ―€λ΅ λ‚΄λ¶€ λ‹¨νΈν™” λ¬Έμ λ” μ—¬μ „ν μλ‹¤.(νμ΄μ§€ λ‹¨μ„λ¥Ό μ‘κ²ν•λ©΄ λ‚΄λ¶€ λ‹¨νΈν™” λ¬Έμ λ„ ν•΄κ²°ν•  μ μμ§€λ§ PAGE MAPPING κ³Όμ •μ΄ λ§μ•„μ§€λ―€λ΅ μ¤νλ ¤ ν¨μ¨μ΄ λ–¨μ–΄μ§„λ‹¤)

### μ„Έκ·Έλ©ν…μ΄μ… κΈ°λ²• (sEGMENTATION)
- κ°€μƒ λ©”λ¨λ¦¬ μ‚¬μ©, λ‚΄λ¶€ λ‹¨νΈν™” ν•΄κ²°, μ™Έλ¶€λ‹¨νΈν™” μ΅΄μ¬
![alt text](img/os_fragmentation_04.png)
- κ°€μƒ λ©”λ¨λ¦¬λ¥Ό μ„λ΅ ν¬κΈ°κ°€ λ‹¤λ¥Έ λ…Όλ¦¬μ  λ‹¨μ„μΈ μ„Έκ·Έλ¨ΌνΈλ΅ λ¶„ν• ν•μ—¬ λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•μ—¬ μ‹¤μ  λ©”λ¨λ¦¬ μ£Όμ†λ΅ λ³€ν™ν•λ” λ°©λ²•
- κ° μ„Έκ·Έλ¨ΌνΈλ” μ—°μ†μ μΈ κ³µκ°„μ— μ €μ¥λμ–΄ μλ‹¤.
- μ„Έκ·Έλ¨ΌνΈλ“¤μ ν¬κΈ°κ°€ λ‹¤λ¥΄κΈ° λ•λ¬Έμ— λ―Έλ¦¬ λ¶„ν• ν•΄ λ‘ μ μ—†κ³ , λ©”λ¨λ¦¬μ— μ μ¬λ  λ• λΉ κ³µκ°„μ„ μ°Ύμ•„ ν• λ‹Ήν•λ” κΈ°λ²•
- λ§¤ν•‘μ„ μ„ν•΄ μ„Έκ·Έλ¨ΌνΈ ν…μ΄λΈ” ν•„μ” -> κ° μ„Έκ·Έλ¨ΌνΈμ μ‹μ‘ μ£Όμ†μ™€ ν¬κΈ° μ •λ³΄ μλ΅
- ν”„λ΅μ„Έμ¤κ°€ ν•„μ”ν• λ©”λ¨λ¦¬λ§νΌ ν• λ‹Ήν•΄μ£ΌκΈ° λ•λ¬Έμ— λ‚΄λ¶€ λ‹¨νΈν™”λ” μΌμ–΄λ‚μ§€ μ•μΌλ‚ μ—¬μ „ν μ¤‘κ°„μ— ν”„λ΅μ„Έμ¤κ°€ λ©”λ¨λ¦¬λ¥Ό ν•΄μ ν•λ©΄ μƒκΈ°λ” κµ¬λ©(hole), μ¦‰ μ™Έλ¶€ λ‹¨νΈν™” λ¬Έμ λ” μ—¬μ „ν μ΅΄μ¬ν•¨

### μ••μ¶• (Compaction)
![alt text](img/os_fragmentation_05.png)
- λ©”λ¨λ¦¬ κ³µκ°„μ„ μ¬λ°°μΉν•μ—¬ λ‹¨νΈν™”λ΅ μΈν•΄ λ¶„μ‚°λμ–΄ μλ” λ©”λ¨λ¦¬ κ³µκ°„λ“¤μ„ ν•λ‚λ΅ ν•©μΉλ” κΈ°λ²• ex) λ””μ¤ν¬ μ΅°κ° λ¨μ

### ν†µν•© (Coalescing)
![alt text](img/os_fragmentation_06.png)
- λ‹¨νΈν™”λ΅ μΈν•΄ λ¶„μ‚°λ λ©”λ¨λ¦¬ κ³µκ°„λ“¤μ„ μΈμ ‘ν•΄ μλ” κ²ƒλΌλ¦¬ ν†µν•©μ‹μΌ ν° λ©”λ¨λ¦¬ κ³µκ°„μΌλ΅ ν•©μΉλ” κΈ°λ²•
- μ••μ¶•μ€ μ¬λ°°μΉλλ” κ²ƒ, ν†µν•©μ€ μΈμ ‘ κ³µκ°„λΌλ¦¬ ν†µν•©λλ‹¤λ” κ²ƒμ—μ„ μ°¨μ΄κ°€ μμ